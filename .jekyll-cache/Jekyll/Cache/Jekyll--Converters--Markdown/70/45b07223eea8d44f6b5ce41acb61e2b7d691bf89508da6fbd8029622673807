I"<h1 id="引言">引言</h1>

<p>最近一批业务需要运行在阿里云的云主机上，第三方提供我们服务器，
在准备系统初始化之前，发现服务器第二块数据盘并没有进行格式化分区。<br />
这个情况在之前腾讯云的服务器上也遇到过。我有些好奇，选配云主机时不能指定数据盘分区？<br />
于是去选购了，确实不行。那现在就由我们自己来分区吧。这个是基础知识了。很久没接触了，现在回顾下。  <br />
手动分区的过程就不说了，现在是要实现 Shell 脚本自动化分区。</p>

<h1 id="shell-脚本自动化分区">Shell 脚本自动化分区</h1>

<p>本篇很基础，话不多说，直接展示 Shell 脚本吧：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nb">echo</span> <span class="s2">"n
p
1


w
"</span> | fdisk /dev/vdb <span class="o">&amp;&amp;</span> mkfs.ext3 /dev/vdb1
<span class="nb">echo</span> <span class="s2">"/dev/vdb1 /data ext3 defaults 0 0"</span> <span class="o">&gt;&gt;</span> /etc/fstab
<span class="nb">mkdir</span> /data
mount /dev/vdb1 /data
<span class="nb">df</span> <span class="nt">-h</span>

</code></pre></div></div>

<p>具体磁盘文件可根据具体情况修改或进一步改进脚本。<br />
上面的分区 Shell 代码可以进一步集成到系统初始化脚本中。</p>

<h1 id="ref">Ref</h1>
<p><a href="https://help.aliyun.com/document_detail/25426.html?spm=5176.7738005.2.1.ycGocS">步骤 4：格式化和挂载数据盘</a><br />
<a href="http://www.cnblogs.com/lienhua34/p/5958559.html">fdisk分区硬盘并shell脚本自动化</a></p>

:ET