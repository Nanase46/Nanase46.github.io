I"	<h1 id="saltstack-ç®¡ç†ä»»åŠ¡ç¼“å­˜">SaltStack ç®¡ç†ä»»åŠ¡ç¼“å­˜</h1>

<h2 id="é»˜è®¤çš„ä»»åŠ¡ç¼“å­˜">é»˜è®¤çš„ä»»åŠ¡ç¼“å­˜</h2>

<h3 id="å‡å°é»˜è®¤ä»»åŠ¡ç¼“å­˜å¤§å°">å‡å°é»˜è®¤ä»»åŠ¡ç¼“å­˜å¤§å°</h3>

<h2 id="é¢å¤–çš„ä»»åŠ¡ç¼“å­˜é€‰é¡¹">é¢å¤–çš„ä»»åŠ¡ç¼“å­˜é€‰é¡¹</h2>

<h1 id="saltstack-å­˜å‚¨ä»»åŠ¡ç»“æœåˆ°ä¸€ä¸ªå¤–éƒ¨ç³»ç»Ÿ">SaltStack å­˜å‚¨ä»»åŠ¡ç»“æœåˆ°ä¸€ä¸ªå¤–éƒ¨ç³»ç»Ÿ</h1>

<h2 id="å¤–éƒ¨ä»»åŠ¡ç¼“å­˜---minion-ç«¯-returner">å¤–éƒ¨ä»»åŠ¡ç¼“å­˜ - Minion ç«¯ Returner</h2>

<h2 id="master-ä»»åŠ¡ç¼“å­˜---master-ç«¯">Master ä»»åŠ¡ç¼“å­˜ - Master ç«¯</h2>

<h2 id="é…ç½®ä¸€ä¸ªå¤–éƒ¨æˆ–-master-ä»»åŠ¡ç¼“å­˜">é…ç½®ä¸€ä¸ªå¤–éƒ¨æˆ– Master ä»»åŠ¡ç¼“å­˜</h2>

<h3 id="æ­¥éª¤-1ç†è§£-salt-returner">æ­¥éª¤ 1ï¼šç†è§£ Salt Returner</h3>

<h3 id="æ­¥éª¤-2é…ç½®-returner">æ­¥éª¤ 2ï¼šé…ç½® Returner</h3>

<p>é…ç½® Master Job Cache å­˜å‚¨åˆ° MySQL ä¾‹å­ï¼š</p>

<p>åœ¨ /etc/salt/master é…ç½®æ–‡ä»¶ä¸­å¢åŠ å¦‚ä¸‹ Returner é…ç½®ï¼š</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">mysql.host</span><span class="pi">:</span> <span class="s1">'</span><span class="s">192.168.56.11'</span>
<span class="s">mysql.user</span><span class="pi">:</span> <span class="s1">'</span><span class="s">salt'</span>
<span class="s">mysql.pass</span><span class="pi">:</span> <span class="s1">'</span><span class="s">salt@pw'</span>
<span class="s">mysql.db</span><span class="pi">:</span> <span class="s1">'</span><span class="s">salt'</span>
<span class="s">mysql.port</span><span class="pi">:</span> <span class="m">3306</span>
</code></pre></div></div>

<h3 id="æ­¥éª¤-3å¯ç”¨å¤–éƒ¨æˆ–-master-ä»»åŠ¡ç¼“å­˜">æ­¥éª¤ 3ï¼šå¯ç”¨å¤–éƒ¨æˆ– Master ä»»åŠ¡ç¼“å­˜</h3>

<p>é…ç½® Master Job Cache å­˜å‚¨åˆ° MySQL ä¾‹å­ï¼š</p>

<p>åœ¨ /etc/salt/master é…ç½®æ–‡ä»¶ä¸­å¢åŠ å¦‚ä¸‹é…ç½®ï¼š</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">master_job_cache</span><span class="pi">:</span> <span class="s">mysql</span>
</code></pre></div></div>

<p>ä¿®æ”¹ Master é…ç½®æ–‡ä»¶åï¼Œéœ€è¦é‡å¯ Master</p>

<blockquote>

  <p>systemctl restart salt-master</p>
</blockquote>

<h1 id="ref">Ref</h1>

<p><a href="https://docs.saltstack.com/en/latest/topics/jobs/job_cache.html">MANAGING THE JOB CACHE</a><br />
<a href="https://docs.saltstack.com/en/latest/topics/jobs/external_cache.html">STORING JOB RESULTS IN AN EXTERNAL SYSTEM</a></p>

:ET