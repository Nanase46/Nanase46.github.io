I"£<h1 id="å¼•è¨€">å¼•è¨€</h1>

<p>åŒäº‹é—®æˆ‘æ€æ ·çœ‹ä¸€ä¸ªè¿›ç¨‹çš„å¯åŠ¨æ—¶é—´å’Œè¿è¡Œæ—¶é—´ï¼Œæˆ‘ç¬¬ä¸€ååº”å½“ç„¶æ˜¯è¯´ç”¨ ps å‘½ä»¤å•¦ã€‚<br />
<code class="highlighter-rouge">ps aux</code>æˆ–<code class="highlighter-rouge">ps -ef</code>ä¸å°±å¯ä»¥çœ‹æ—¶é—´å—ï¼Ÿ</p>

<h1 id="ps-auxé€‰é¡¹åŠè¾“å‡ºè¯´æ˜"><code class="highlighter-rouge">ps aux</code>é€‰é¡¹åŠè¾“å‡ºè¯´æ˜</h1>

<p>æˆ‘ä»¬æ¥é‡æ–°å¤ä¹ ä¸‹<code class="highlighter-rouge">ps aux</code>çš„é€‰é¡¹ï¼Œè¿™æ˜¯ç±» BSD é£æ ¼çš„å‘½ä»¤é€‰é¡¹ï¼Œå› ä¸ºä¸å¸¦â€œ-â€ã€‚</p>

<p>é€šè¿‡ man å¯ä»¥çœ‹åˆ° aux é€‰é¡¹è§£é‡Šå¦‚ä¸‹ï¼š</p>

<pre>

a      Lift the BSD-style "only yourself" restriction, which is imposed upon the set of all processes 
when some BSD-style (without "-") options are used or when the ps personality setting is BSD-like.  
The set of processes selected in this manner is in addition to the set of processes selected by other means.
An alternate description is that this option causes ps to list all processes with a terminal (tty), 
or to list all processes when used together with the x option.

x      Lift the BSD-style "must have a tty" restriction, which is imposed upon the set of all processes 
when some BSD-style (without "-") options are used or when the ps personality setting is BSD-like.  
The set of processes selected in this manner is in addition to the set of processes selected by other means.  
An alternate description is that this option causes ps to list all processes owned by you (same EUID as ps), 
or to list all processes when used together with the a option.

u      Display user-oriented format.
              

</pre>

<p>ç„¶åå†æ¥çœ‹ä¸‹<code class="highlighter-rouge">ps aux</code>çš„è¾“å‡ºç»“æœï¼Œå…¶é¦–è¡Œå¦‚ä¸‹ï¼Œè¯´æ˜äº†è¾“å‡ºçš„å„åˆ—ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
</code></pre></div></div>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°STARTå’ŒTIMEåˆ—ï¼Œé€šè¿‡ man å…¶è¯´æ˜å¦‚ä¸‹ï¼š</p>

<pre>

bsdstart    START     time the command started.  
If the process was started less than 24 hours ago, the output format is " HH:MM", 
else it is " Mmm:SS" (where Mmm is the three letters of the month). 
See also lstart, start, start_time, and stime.

bsdtime     TIME      accumulated cpu time, user + system.  
The display format is usually "MMM:SS", 
but can be shifted to the right if the process used more than 999 minutes of cpu time.

</pre>

<p>START æ˜¯å‘½ä»¤å¯åŠ¨çš„æ—¶é—´ï¼Œå¦‚æœåœ¨ 24 å°æ—¶ä¹‹å†…å¯åŠ¨çš„ï¼Œåˆ™è¾“å‡ºæ ¼å¼ä¸ºâ€HH:MMâ€ï¼ˆå°æ—¶ï¼šåˆ†é’Ÿï¼‰ï¼Œ<br />
å¦åˆ™å°±æ˜¯â€Mmm:SSâ€ï¼ˆæœˆä»½è‹±è¯­å•è¯å‰ 3 ä¸ªå­—æ¯ï¼šä¸€æœˆçš„ç¬¬å‡ å·ï¼Ÿ[SS è¿™é‡Œé¢æ€ä¹ˆç†è§£ï¼Ÿä¸ºä»€ä¹ˆæœ‰å†’å·å‘¢ï¼Ÿè¾“å‡ºå¹¶æ²¡å†’å·]ï¼‰
å¯ä»¥çŸ¥é“ï¼Œè¿™é‡Œå¹¶ä¸èƒ½ç›´æ¥çœ‹å‡º 24 å°æ—¶ä¹‹å‰å¯åŠ¨çš„å‘½ä»¤çš„ç²¾ç¡®å¯åŠ¨æ—¶é—´ã€‚</p>

<p>TIME æ˜¯ç´¯ç§¯çš„ CPU æ—¶é—´ï¼ˆuser+systemï¼‰ï¼Œæ˜¾ç¤ºæ ¼å¼é€šå¸¸æ˜¯â€MMM:SSâ€ã€‚ï¼ˆåˆ†é’Ÿï¼šç§’ï¼‰
å¯ä»¥çœ‹å‡ºï¼Œè¿™é‡Œå¹¶ä¸æ˜¯æŒ‡ä»å‘½ä»¤å¯åŠ¨å¼€å§‹åˆ°ç°åœ¨æ‰€èŠ±çš„æ—¶é—´ã€‚</p>

<h1 id="ps--efé€‰é¡¹åŠè¾“å‡ºè¯´æ˜"><code class="highlighter-rouge">ps -ef</code>é€‰é¡¹åŠè¾“å‡ºè¯´æ˜</h1>

<p>å¸¦ä¸€ä¸ªâ€œ-â€ä¸º UNIX é£æ ¼çš„å‘½ä»¤é€‰é¡¹ã€‚</p>

<pre>

-e     Select all processes.  Identical to -A.

-f     Do full-format listing. 
This option can be combined with many other UNIX-style options to add additional columns.  
It also causes the command arguments to be printed.  
When used with -L, the NLWP (number of threads) and LWP (thread ID) columns will be added.  
See the c option, the format keyword args, and the format keyword comm.

-o format     User-defined format.  
format is a single argument in the form of a blank-separated or comma-separated list, 
which offers a way to specify individual output columns.  
The recognized keywords are described in the STANDARD FORMAT SPECIFIERS section below.  

Headers may be renamed (ps -o pid,ruser=RealUser -o comm=Command) as desired.  
If all column headers are empty (ps -o pid= -o comm=) then the header line will not be output.  
Column width will increase as needed for wide headers; 
this may be used to widen up columns such as WCHAN (ps -o pid,wchan=WIDE-WCHAN-COLUMN -o comm).  
Explicit width control (ps opid,wchan:42,cmd) is offered too.  
The behavior of ps -o pid=X,comm=Y varies with personality; 
output may be one column named "X,comm=Y" or two columnsnamed "X" and "Y".  
Use multiple -o options when in doubt.  
Use the PS_FORMAT environment variable to specify a default as desired; 
DefSysV and DefBSD are macros that may be used to choose the default UNIX or BSD columns.              

</pre>

<p>ç„¶åå†æ¥çœ‹ä¸‹<code class="highlighter-rouge">ps -ef</code>çš„è¾“å‡ºç»“æœï¼Œå…¶é¦–è¡Œå¦‚ä¸‹ï¼Œè¯´æ˜äº†è¾“å‡ºçš„å„åˆ—ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>UID        PID  PPID  C STIME TTY          TIME CMD
</code></pre></div></div>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° STIM Eå’Œ TIME åˆ—ï¼Œé€šè¿‡ man å…¶è¯´æ˜å¦‚ä¸‹
(æˆ‘è¿™å°æœåŠ¡å™¨ä¸Š ps ç‰ˆæœ¬ä¸º procps-ng version 3.3.9ï¼Œman ä¸­æ‰¾ä¸åˆ° STIME çš„è§£é‡Šï¼Œé€šè¿‡è§‚å¯Ÿè¾“å‡ºï¼Œ<br />
æˆ‘ä»¬å¯ä»¥æ¨æ–­è¿™ä¸ª STIME å…¶å®å’Œå‰é¢ START æ˜¯ä¸€æ ·çš„ï¼ŒæŒ‡çš„æ˜¯å‘½ä»¤å¯åŠ¨çš„æ—¶é—´ï¼Œ<a href="http://www.linfo.org/ps.html">è¿™é‡Œ</a>æœ‰è¿™ä¸ªè¯´æ˜ï¼‰ï¼š</p>

<p>TIME åˆ—ä¹Ÿå’Œå‰é¢è¯´çš„ TIME åˆ—ä¸€æ ·æŒ‡çš„å‘½ä»¤ä½¿ç”¨çš„ç´¯ç§¯ CPU æ—¶é—´ã€‚</p>

<h1 id="ä½¿ç”¨-ps-å‘½ä»¤æŸ¥çœ‹è¿›ç¨‹å¯åŠ¨çš„ç²¾ç¡®æ—¶é—´å’Œå¯åŠ¨åæ‰€æµé€çš„æ—¶é—´">ä½¿ç”¨ ps å‘½ä»¤æŸ¥çœ‹è¿›ç¨‹å¯åŠ¨çš„ç²¾ç¡®æ—¶é—´å’Œå¯åŠ¨åæ‰€æµé€çš„æ—¶é—´</h1>

<p>å›åˆ°å¼•è¨€ä¸­çš„é—®é¢˜ï¼ŒåŒäº‹å®é™…è¦é—®çš„æ˜¯ä¸€ä¸ªè¿›ç¨‹å¯åŠ¨çš„ç²¾ç¡®æ—¶é—´å’Œè¿›ç¨‹å¯åŠ¨åæ‰€æµé€çš„æ—¶é—´ã€‚<br />
å…¶å®è¿™ 2 ä¸ªæ—¶é—´ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡ ps å‘½ä»¤è¾“å‡ºçš„ã€‚
æ ‡è¯†ç¬¦å¦‚ä¸‹ï¼š</p>

<pre>
       lstart      STARTED   time the command started.  See also bsdstart, start, start_time, and stime.
       etime       ELAPSED   elapsed time since the process was started, in the form [[DD-]hh:]mm:ss.
</pre>

<p>ä¾‹å­ï¼š</p>

<p>æŸ¥çœ‹ nginx è¿›ç¨‹å¯åŠ¨çš„ç²¾ç¡®æ—¶é—´å’Œå¯åŠ¨åæ‰€æµé€çš„æ—¶é—´ï¼š</p>

<pre>

[root@iZ25p102vo3Z ~]# ps -eo pid,lstart,etime,cmd | grep nginx
16968 Fri Mar  4 16:04:27 2016 41-21:14:04 nginx: master process /usr/sbin/nginx
17826 Fri Mar  4 22:53:51 2016 41-14:24:40 nginx: worker process
18312 Fri Apr 15 13:18:31 2016       00:00 grep --color=auto nginx

</pre>

<h1 id="ref">Ref</h1>
<p>man ps<br />
<a href="http://www.linfo.org/ps.html">The ps Command</a></p>
:ET