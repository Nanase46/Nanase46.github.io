I"<h1 id="1-jenkins-ä¸Šå®‰è£…é…ç½®-sonarqube-plugin-æ’ä»¶">1. Jenkins ä¸Šå®‰è£…é…ç½® SonarQube Plugin æ’ä»¶</h1>

<p>é¦–å…ˆå®‰è£… SonarQube Plugin æ’ä»¶(ä¼šæœ‰å‡ ä¸ªä¾èµ–æ’ä»¶)ã€‚ç„¶ååšå¦‚ä¸‹é…ç½®ï¼š</p>

<h2 id="11-å°†-jenkins-å…³è”-sonar">1.1 å°† Jenkins å…³è” Sonar</h2>

<p>å®šä½åˆ° ` â€œManage Jenkinsâ€-&gt;â€Configure Systemâ€-&gt;â€SonarQube serversâ€-&gt;<br />
â€œSonarQube installationsâ€-&gt;â€Add SonarQubeâ€ ` é…ç½®å¦‚ä¸‹ç„¶åä¿å­˜ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Name: Sonar
Server URL: http://192.168.56.11:9000/
Server version: 5.3 or higher

</code></pre></div></div>

<h2 id="12-é…ç½®-sonarqube-scanner">1.2 é…ç½® SonarQube Scanner</h2>

<p>å®šä½åˆ° ` â€œManage Jenkinsâ€-&gt;â€Global Tool Configurationâ€-&gt;â€SonarQube Scannerâ€-&gt;<br />
â€œSonarQube Scanner installationsâ€-&gt;â€Add SonarQube Scannerâ€ `é…ç½®å¦‚ä¸‹ç„¶åä¿å­˜ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Name: Sonar Scanner
ä¸é€‰æ‹© Install automatically
SONAR_RUNNER_HOME: /usr/local/sonar-scanner 
<span class="c"># SonarQuber Scanner å’Œ Jekins æ˜¯åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Š ï¼ŒSonarQube Server ä¸éœ€è¦</span>

</code></pre></div></div>

<h1 id="2-é…ç½®-jekins-é¡¹ç›®çš„æ„å»º">2. é…ç½® Jekins é¡¹ç›®çš„æ„å»º</h1>

<p>é€‰æ‹©ä¹‹å‰é…ç½®çš„ auto-deploy é¡¹ç›®ï¼Œåœ¨ Build ä¸‹é…ç½®å¦‚ä¸‹åä¿å­˜ï¼š</p>

<p>é€‰æ‹© <code class="highlighter-rouge">Execute SonarQube Scanner</code></p>

<p>Analysis properties é…ç½®å¦‚ä¸‹:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
sonar.projectKey<span class="o">=</span>demo
sonar.projectName<span class="o">=</span>demo
sonar.projectVersion<span class="o">=</span>1.0
sonar.sources<span class="o">=</span>./
sonar.language<span class="o">=</span>php
sonar.sourceEncoding<span class="o">=</span>UTF-8

</code></pre></div></div>

<p>è¿™é‡Œçš„ Analysis properties æœ‰ 2 ç§æ–¹æ³•ï¼š</p>

<ol>
  <li>è®©ç ”å‘åœ¨é¡¹ç›®æ ¹ç›®å½•æ”¾ç½®åŒ…å«ä»¥ä¸Šå†…å®¹çš„ SonarQube Scanner é…ç½®æ–‡ä»¶</li>
  <li>å¦‚ä¸Šï¼Œåœ¨é¡¹ç›®æ„å»ºä¸Šæ‰‹åŠ¨é…ç½®</li>
</ol>

<h1 id="3-æµ‹è¯•-jenkins-é¡¹ç›®æ„å»º">3. æµ‹è¯• Jenkins é¡¹ç›®æ„å»º</h1>

<p>é€‰æ‹© â€œauto-deployâ€ é¡¹ç›®ï¼Œç‚¹å‡» â€œBuild Nowâ€ ç«‹å³æ„å»ºã€‚</p>

<p>æŸ¥çœ‹ Output æ˜¯å¦æ„å»ºæˆåŠŸã€‚ï¼ˆOutput æ˜¯å®æ—¶æ˜¾ç¤ºçš„ã€‚ï¼‰</p>

<p>Jekins é¡¹ç›®ä¸»é¡µä¸Šæœ‰ Sonar å¿«æ·æ–¹å¼ï¼Œå¯ä»¥ç‚¹å‡»æŸ¥çœ‹ä»£ç æ‰«æçš„å…·ä½“ç»“æœã€‚</p>

<p>å¯ä»¥åœ¨ SonarQuber é¦–é¡µæ·»åŠ é…ç½®ä¸€äº› widgetsï¼š</p>

<ul>
  <li>Integration Tests Coverage é›†æˆæµ‹è¯•è¦†ç›–ç‡</li>
  <li>Documentation &amp; Comments æ–‡æ¡£å’Œæ³¨é‡Š</li>
</ul>

<h1 id="4-é…ç½®-jekins-é¡¹ç›®æ„å»ºåæ“ä½œ">4. é…ç½® Jekins é¡¹ç›®æ„å»ºåæ“ä½œ</h1>

<p>å¯é…ç½®é‚®ä»¶é€šçŸ¥ï¼Œå½“æ„å»ºå¤±è´¥æ—¶å‘é€é‚®ä»¶é€šçŸ¥ã€‚</p>

<p>é‚®ä»¶é€šçŸ¥éœ€è¦å…ˆé…ç½®å¥½ï¼Œå¦‚ä¸‹ï¼š</p>

<h2 id="é…ç½®ç³»ç»Ÿç®¡ç†å‘˜é‚®ç®±åœ°å€">é…ç½®ç³»ç»Ÿç®¡ç†å‘˜é‚®ç®±åœ°å€</h2>

<p>å®šä½åˆ° <code class="highlighter-rouge">"Manage Jenkins"-&gt;"Configure System"-&gt;"Jenkins Location"  
System Admin e-mail address: 779432xxx@qq.com </code>(ä»¥ QQ é‚®ç®±æ¼”ç¤º)</p>

<h2 id="é…ç½®-e-mail-notification">é…ç½® E-mail Notification</h2>

<p>ç„¶åå†å®šä½åˆ°<code class="highlighter-rouge">"Manage Jenkins"-&gt;"Configure System"-&gt;"E-mail Notification"</code>ï¼Œé…ç½®å¦‚ä¸‹å›¾ç¤ºï¼š</p>

<p><img src="http://jaminzhang.github.io/images/CI-CD/Jenkins-Email-Notification.png" alt="Jenkins-Email-Notification" /></p>

<p>å°† SonarQube æœåŠ¡å…³é—­ï¼Œç„¶åæ„å»ºé¡¹ç›®ï¼Œç”±äº SonarQube æœåŠ¡æ— æ³•è®¿é—®æ‰€ä»¥è‚¯å®šä¼šå¯¼è‡´é¡¹ç›®æ„å»ºå¤±è´¥ä»è€Œè§¦å‘é‚®ä»¶é€šçŸ¥ã€‚</p>

<p>æœ€åï¼Œæˆ‘ä»¬æŠŠ auto-deploy é¡¹ç›®æ”¹åæˆ demo-sonarã€‚</p>

<h1 id="é‡åˆ°çš„é—®é¢˜">é‡åˆ°çš„é—®é¢˜</h1>

<p>4 æ¬¡æ„å»ºå¤±è´¥ï¼Œè€Œä¸” Jekins è¿›ç¨‹ä¹Ÿè‡ªåŠ¨å…³æ‰äº†ï¼Œåˆæ­¥åˆ¤æ–­æ˜¯æµ‹è¯•çš„è™šæ‹Ÿæœºå†…å­˜ä¸è¶³åŸå› ã€‚</p>

:ET