I"Ñ<h1 id="å¼•è¨€">å¼•è¨€</h1>

<p>æŸä¸šåŠ¡é…ç½®å®Œæˆåéœ€è¦æäº¤æ•°æ®åˆ°ä¸€ API æ¥å£ï¼Œæäº¤å‘½ä»¤åœ¨ Shell ä¸­ï¼Œé¦–å…ˆæƒ³åˆ°ä½¿ç”¨çš„ json æ•°æ®ï¼Œå…¶ä¸­å¼•ç”¨äº† Shell å˜é‡ã€‚</p>

<h1 id="é—®é¢˜shell-å˜é‡æ²¡è§£ææˆåŠŸåŠè§£å†³æ–¹æ³•">é—®é¢˜ï¼šShell å˜é‡æ²¡è§£ææˆåŠŸåŠè§£å†³æ–¹æ³•</h1>

<p>curl æäº¤æ•°æ®éƒ¨åˆ†å¦‚ä¸‹ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-XPOST</span> <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> http://admin.xxx.cn/xxx/AddServer <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{\
"platform_name":"${PLATFORM}", \
"region_id":"${SID}", \
"game_db_ip":"${GAME_DOMAIN}", \
"game_ip":"${GAME_DOMAIN}", \
"log_db_ip":"admin.xxx.cn", \
"server_type":"3", \
"server_state":"1", \
"main_server":"0"\
}'</span>
</code></pre></div></div>

<p>å…¶ä¸­ä¸Šé¢å¼•ç”¨çš„ Shell å˜é‡æ²¡æœ‰è¢«è§£æã€‚ä¸»è¦æ˜¯å¼•å·é—®é¢˜ã€‚curl ä¸­å¼•å·è¯´æ˜å¦‚ä¸‹ï¼š</p>

<blockquote>

  <p>The double quotes in the -H arguments (as in -H â€œfoo barâ€) tell bash to keep whatâ€™s inside as a single argument (even if it contains spaces).<br />
The single quotes in the â€“data argument (as in â€“data â€˜foo barâ€™) do the same, except they pass all text verbatim (including double quote characters and the dollar sign).<br />
To insert a variable in the middle of a single quoted text, you have to end the single quote, then concatenate with the double quoted variable, and re-open the single quote to continue the text: â€˜foo barâ€™â€œ$variableâ€â€˜more fooâ€™.</p>
</blockquote>

<p>å¦‚ä¸Šï¼Œæƒ³è¦ Shell å˜é‡è¢«è§£æï¼Œä¿®æ”¹æˆå¦‚ä¸‹çš„å¼•å·å¼•ç”¨å˜é‡ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-XPOST</span> <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> http://admin.xxx.cn/zmsgApi/xxx/AddServer <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'{\
"platform_name":"'</span><span class="s2">"</span><span class="k">${</span><span class="nv">PLATFORM</span><span class="k">}</span><span class="s2">"</span><span class="s1">'", \
"region_id":"'</span><span class="s2">"</span><span class="k">${</span><span class="nv">SID</span><span class="k">}</span><span class="s2">"</span><span class="s1">'", \
"game_db_ip":"'</span><span class="s2">"</span><span class="k">${</span><span class="nv">GAME_DOMAIN</span><span class="k">}</span><span class="s2">"</span><span class="s1">'", \
"game_ip":"'</span><span class="s2">"</span><span class="k">${</span><span class="nv">GAME_DOMAIN</span><span class="k">}</span><span class="s2">"</span><span class="s1">'", \
"log_db_ip":"admin.xxx.cn", \
"server_type":"3", \
"server_state":"1", \
"main_server":"0"\
}'</span>
</code></pre></div></div>

<h1 id="åç»­">åç»­</h1>

<p>ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•å¯ä»¥æ­£ç¡®è§£æ Shell å˜é‡ï¼Œä½†åˆé‡åˆ°å¦ä¸€ä¸ªé—®é¢˜ï¼Œçœ‹ä¸Šé¢çš„æäº¤å‘½ä»¤ï¼Œä¸ºäº†æ˜“è¯»ï¼Œä½¿ç”¨äº†æ–­è¡Œç¬¦â€œ\â€ï¼Œ<br />
å¼•å‘çš„é—®é¢˜æ˜¯ curl æäº¤è¿‡å»ä¼šå‡ºç°é—®é¢˜ã€‚<br />
äºæ˜¯æœ€ç»ˆä¸ä½¿ç”¨è¿™ç§ curl POST æäº¤ json æ•°æ®çš„æ–¹æ³•ï¼Œç›´æ¥é€šè¿‡ GET æäº¤ï¼Œåœ¨ URL åŒ…å«å‚æ•°çš„æ–¹æ³•ã€‚å¦‚ä¸‹ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="s2">"http://admin.xxx.cn/xxx/AddServer?platform_name=</span><span class="k">${</span><span class="nv">PLATFORM</span><span class="k">}</span><span class="s2">&amp;region_id=</span><span class="k">${</span><span class="nv">SID</span><span class="k">}</span><span class="se">\</span><span class="s2">
&amp;game_db_ip=</span><span class="k">${</span><span class="nv">GAME_DOMAIN</span><span class="k">}</span><span class="s2">&amp;game_ip=</span><span class="k">${</span><span class="nv">GAME_DOMAIN</span><span class="k">}</span><span class="s2">&amp;log_db_ip=admin.xxx.cn&amp;server_type=3&amp;server_state=1&amp;main_server=0"</span>
</code></pre></div></div>

<h1 id="ref">Ref</h1>
<p><a href="http://stackoverflow.com/questions/17029902/using-curl-post-with-variables-defined-in-bash-script-functions">Using curl POST with variables defined in bash script functions</a>ã€€ã€€ã€€</p>
:ET