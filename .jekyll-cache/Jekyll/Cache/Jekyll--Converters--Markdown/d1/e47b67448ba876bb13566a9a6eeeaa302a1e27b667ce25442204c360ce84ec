I"ˆ<h1 id="å¼•è¨€">å¼•è¨€</h1>

<p>æœ€è¿‘æ‰å¼€å§‹æ¥è§¦ CentOS 7 ç³»ç»Ÿï¼ˆç”Ÿäº§ç¯å¢ƒåŸºæœ¬éƒ½æ˜¯ CentOS 6ï¼‰ï¼Œé‡Œé¢çš„æœåŠ¡ç®¡ç†ç”¨çš„æ˜¯å…¨æ–°çš„ systemdï¼Œæ›¿ä»£äº†ä»¥å‰çš„ SysV initã€‚<br />
æ„Ÿè§‰éœ€è¦å¾ˆå¤šæ–°ä¸œè¥¿è¦å­¦ä¹ æŒæ¡ã€‚</p>

<h1 id="ä»€ä¹ˆæ˜¯-systemd">ä»€ä¹ˆæ˜¯ systemd</h1>

<pre>

systemd is a suite of basic building blocks for a Linux system. Â  
It provides a system and service manager that runs as PID 1 and starts the rest of the system. 
systemd provides aggressive parallelization capabilities, uses socket and D-Bus activation for starting services, 
offers on-demand starting of daemons, keeps track of processes using Linux control groups, 
supports snapshotting and restoring of the system state, maintains mount and automount points 
and implements an elaborate transactional dependency-based service control logic. 
systemd supports SysV and LSB init scripts and works as a replacement for sysvinit.
Other parts include a logging daemon, utilities to control basic system configuration 
like the hostname, date, locale, maintain a list of logged-in users 
and running containers and virtual machines, system accounts, runtime directories and settings, 
and daemons to manage simple network configuration, network time synchronization, 
log forwarding, and name resolution.

</pre>

<p>ä¸­æ–‡ä»‹ç»ï¼š</p>

<pre>

systemd æ˜¯ Linux ä¸‹çš„ä¸€ç§ init è½¯ä»¶ï¼Œç”± Lennart Poettering å¸¦å¤´å¼€å‘ï¼Œå¹¶åœ¨ LGPL 2.1 åŠå…¶åç»­ç‰ˆæœ¬è®¸å¯è¯ä¸‹å¼€æºå‘å¸ƒã€‚
å…¶å¼€å‘ç›®æ ‡æ˜¯æä¾›æ›´ä¼˜ç§€çš„æ¡†æ¶ä»¥è¡¨ç¤ºç³»ç»ŸæœåŠ¡é—´çš„ä¾èµ–å…³ç³»ï¼Œå¹¶ä¾æ­¤å®ç°ç³»ç»Ÿåˆå§‹åŒ–æ—¶æœåŠ¡çš„å¹¶è¡Œå¯åŠ¨ï¼Œ
åŒæ—¶è¾¾åˆ°é™ä½ Shell çš„ç³»ç»Ÿå¼€é”€çš„æ•ˆæœï¼Œæœ€ç»ˆä»£æ›¿ç°åœ¨å¸¸ç”¨çš„ System V ä¸ BSD é£æ ¼ init ç¨‹åºã€‚

ä¸å¤šæ•°å‘è¡Œç‰ˆä½¿ç”¨çš„ System V é£æ ¼ init ç›¸æ¯”ï¼Œsystemd é‡‡ç”¨äº†ä»¥ä¸‹æ–°æŠ€æœ¯ï¼š
é‡‡ç”¨ Socket æ¿€æ´»å¼ä¸æ€»çº¿æ¿€æ´»å¼æœåŠ¡ï¼Œä»¥æé«˜ç›¸äº’ä¾èµ–çš„å„æœåŠ¡çš„å¹¶è¡Œè¿è¡Œæ€§èƒ½ï¼›
ç”¨ cgroups ä»£æ›¿ PID æ¥è¿½è¸ªè¿›ç¨‹ï¼Œå› æ­¤å³ä½¿æ˜¯ä¸¤æ¬¡ fork ä¹‹åç”Ÿæˆçš„å®ˆæŠ¤è¿›ç¨‹ä¹Ÿä¸ä¼šè„±ç¦» systemd çš„æ§åˆ¶ã€‚
ä»è®¾è®¡æ„æ€ä¸Šè¯´ï¼Œç”±äº systemd ä½¿ç”¨äº† cgroups ä¸ fanotify ç­‰ç»„ä»¶ä»¥å®ç°å…¶ç‰¹æ€§ï¼Œæ‰€ä»¥åªé€‚ç”¨äº Linuxã€‚

 
SystemD è¢«è®¾è®¡ç”¨æ¥æ”¹è¿› SysVinit çš„ç¼ºç‚¹ï¼Œä¸ Ubuntu çš„ upstart å½¢æˆæŠ€æœ¯ç«äº‰ã€‚
SystemD çš„å¾ˆå¤šæ¦‚å¿µæ¥æºäºè‹¹æœçš„ launchdã€‚
ç›®æ ‡æ˜¯å°½å¯èƒ½å¯åŠ¨æ›´å°‘è¿›ç¨‹ï¼›å°½å¯èƒ½å°†æ›´å¤šè¿›ç¨‹å¹¶è¡Œå¯åŠ¨ï¼ˆè¿™æ˜¯æ€§èƒ½ä¼˜äº SysV init çš„ç†å¿µåŸºç¡€ï¼‰ã€‚
SystemD å°½å¯èƒ½å‡å°‘å¯¹ Shell è„šæœ¬çš„ä¾èµ–ã€‚
ä¼ ç»Ÿ SysV init ä½¿ç”¨ inittab æ¥å†³å®šè¿è¡Œå“ªäº› Shell è„šæœ¬ï¼Œå¤§é‡ä½¿ç”¨ Shell è„šæœ¬è¢«è®¤ä¸ºæ˜¯æ•ˆç‡ä½ä¸‹æ— æ³•å¹¶è¡Œçš„åŸå› ã€‚
SystemD ä½¿ç”¨äº† Linux ä¸“å±æŠ€æœ¯ï¼Œä¸å†é¡¾åŠ POSIX å…¼å®¹ï¼Œ
åªè¦èƒ½æ»¡è¶³ç¤¾ä¼šå˜é©çš„éœ€è¦ï¼Œçªç ´ä¸€äº›å¯èƒ½è¿‡æ—¶çš„æŠ€æœ¯çº¦æŸï¼Œè¿™ä¹Ÿæ˜¯å½“ä»Šåˆ›ä¿¡ç†å¿µçš„éœ€è¦ï¼Œç›¸ä¿¡å¸‚åœºä¼šç»™å‡ºè¯„åˆ¤ã€‚

</pre>

<h1 id="ä¸ºä»€ä¹ˆä¼šä½¿ç”¨-systemd">ä¸ºä»€ä¹ˆä¼šä½¿ç”¨ systemd</h1>

<p>ä¸Šé¢çš„å¯¹ systemd çš„è¯´æ˜ä¸­å…¶å®å·²ç»æåˆ°äº†ã€‚
æ—¶è¿‡å¢ƒè¿ï¼Œä¼ ç»Ÿçš„ SysV init å·²ç»ä¸èƒ½æ»¡è¶³ç°ä»£æœåŠ¡å™¨çš„éœ€æ±‚äº†ã€‚</p>

<pre>

Well, to be overly simplistic, it was time. 
Now that our servers have graduated into the modern age where they are asked to do everything 
including make us dinner (well, maybe not that far yet), 
there were a whole lot of things that the older â€˜initâ€™ based systems 
(to be complete, the â€˜initâ€™ systems are technically grouped into the â€˜sysvinitâ€™ category 
to mark their compatibility with Unix System V from quite some time ago) 
are not very good at or require a lot of extra hacking around.

</pre>

<h1 id="ref">Ref</h1>
<p><a href="https://en.wikipedia.org/wiki/Systemd">systemd Wikipedia</a><br />
<a href="https://linuxacademy.com/blog/linux/centos-7-take-the-plunge-into-systemd/">CentOS 7: Take the Plunge into SystemD</a><br />
<a href="https://www.freedesktop.org/wiki/Software/systemd/">systemd System and Service Manager</a><br />
<a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/chap-Managing_Services_with_systemd.html">CHAPTER 8. MANAGING SERVICES WITH SYSTEMD</a><br />
<a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html">Systemd å…¥é—¨æ•™ç¨‹ï¼šå‘½ä»¤ç¯‡</a><br />
<a href="http://www.huzs.net/?p=2180">Systemd è¯¦è§£</a><br />
<a href="http://www.ha97.com/5657.html">RHEL/CentOS 7.x çš„å‡ ç‚¹æ–°æ”¹å˜</a></p>
:ET