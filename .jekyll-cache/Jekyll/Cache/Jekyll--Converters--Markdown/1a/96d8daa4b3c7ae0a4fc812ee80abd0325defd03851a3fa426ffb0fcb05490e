I"ùL<p>Docker å¿«é€Ÿå…¥é—¨</p>

<h1 id="å®‰è£…å¯åŠ¨-docker">å®‰è£…å¯åŠ¨ Docker</h1>

<blockquote>

  <p>yum install docker<br />
systemctl start docker</p>
</blockquote>

<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ yum å®‰è£… CentOS è‡ªå¸¦æºä¸­çš„ Dockerï¼Œ
è¿™ä¸ªç‰ˆæœ¬æ²¡æœ‰ Docker è‡ªå·±çš„ yum æºä¸­ Docker  ç‰ˆæœ¬é«˜ï¼Œ
å¦‚æœè¦å®‰è£…æœ€æ–°çš„ Docker ç‰ˆæœ¬ï¼Œéœ€è¦ä½¿ç”¨ Docker è‡ªå·±çš„ yum æºå®‰è£…ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c"># Docker å¯åŠ¨åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Docker å¯åŠ¨äº†ä¸€ä¸ª docker0 ç½‘å¡</span>

<span class="o">[</span>root@linux-node1 ~]# ifconfig
docker0: <span class="nv">flags</span><span class="o">=</span>4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500
        inet 172.17.0.1  netmask 255.255.0.0  broadcast 0.0.0.0
        ether 02:42:93:3f:73:33  txqueuelen 0  <span class="o">(</span>Ethernet<span class="o">)</span>
        RX packets 2141  bytes 101161 <span class="o">(</span>98.7 KiB<span class="o">)</span>
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 2318  bytes 13797412 <span class="o">(</span>13.1 MiB<span class="o">)</span>
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

</code></pre></div></div>

<h1 id="docker-é•œåƒç®¡ç†">Docker é•œåƒç®¡ç†</h1>

<ul>
  <li>æœç´¢é•œåƒï¼šdocker search</li>
  <li>è·å–é•œåƒï¼šdocker pull</li>
  <li>æŸ¥çœ‹é•œåƒï¼šdocker images</li>
  <li>åˆ é™¤é•œåƒï¼šdocker rmi</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c"># æœç´¢ DockerHub ä¸Šçš„ centos/nginx é•œåƒï¼ŒåŠ æ˜Ÿæ•°è‡³å°‘ä¸º 10</span>

<span class="o">[</span>root@linux-node1 ~]# docker search <span class="nt">-s</span> 10 centos 
INDEX       NAME                                      DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
docker.io   docker.io/centos                          The official build of CentOS.                   2645      <span class="o">[</span>OK]       
docker.io   docker.io/ansible/centos7-ansible         Ansible on Centos7                              85                   <span class="o">[</span>OK]
docker.io   docker.io/jdeathe/centos-ssh              CentOS-6 6.8 x86_64 / CentOS-7 7.2.1511 x8...   33                   <span class="o">[</span>OK]
docker.io   docker.io/jdeathe/centos-ssh-apache-php   CentOS-6 6.8 x86_64 / Apache / PHP / PHP M...   19                   <span class="o">[</span>OK]
docker.io   docker.io/nimmis/java-centos              This is docker images of CentOS 7 with dif...   15                   <span class="o">[</span>OK]
docker.io   docker.io/million12/centos-supervisor     Base CentOS-7 with supervisord launcher, h...   12                   <span class="o">[</span>OK]
<span class="o">[</span>root@linux-node1 ~]# docker search <span class="nt">-s</span> 10 nginx
INDEX       NAME                                DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
docker.io   docker.io/nginx                     Official build of Nginx.                        4117      <span class="o">[</span>OK]       
docker.io   docker.io/jwilder/nginx-proxy       Automated Nginx reverse proxy <span class="k">for </span>docker c...   794                  <span class="o">[</span>OK]
docker.io   docker.io/richarvey/nginx-php-fpm   Container running Nginx + PHP-FPM capable ...   270                  <span class="o">[</span>OK]
docker.io   docker.io/million12/nginx-php       Nginx + PHP-FPM 5.5, 5.6, 7.0 <span class="o">(</span>NG<span class="o">)</span>, CentOS...   76                   <span class="o">[</span>OK]
docker.io   docker.io/maxexcloo/nginx-php       Framework container with nginx and PHP-FPM...   58                   <span class="o">[</span>OK]
docker.io   docker.io/webdevops/php-nginx       Nginx with PHP-FPM                              49                   <span class="o">[</span>OK]
docker.io   docker.io/h3nrik/nginx-ldap         NGINX web server with LDAP/AD, SSL and pro...   29                   <span class="o">[</span>OK]
docker.io   docker.io/bitnami/nginx             Bitnami nginx Docker Image                      18                   <span class="o">[</span>OK]

<span class="c"># æŸ¥çœ‹æœ¬åœ°é•œåƒ</span>

<span class="o">[</span>root@linux-node1 ~]# docker images
REPOSITORY                  TAG                 IMAGE ID            CREATED             SIZE

<span class="c"># æœºå™¨ä¸Šæ²¡æœ‰ Docker é•œåƒï¼Œä¸‹é¢ä½¿ç”¨ docker pull è·å– nginx/centos é•œåƒ</span>

<span class="o">[</span>root@linux-node1 ~]# docker pull nginx
Using default tag: latest
Trying to pull repository docker.io/library/nginx ... 
latest: Pulling from docker.io/library/nginx
8ad8b3f87b37: Pull <span class="nb">complete 
</span>c6b290308f88: Pull <span class="nb">complete 
</span>f8f1e94eb9a9: Pull <span class="nb">complete 
</span>Digest: sha256:aa5ac743d65e434c06fff5ceaab6f35cc8519d80a5b6767ed3bdb330f47e4c31
Status: Downloaded newer image <span class="k">for </span>docker.io/nginx:latest
<span class="o">[</span>root@linux-node1 ~]# docker pull centos
Using default tag: latest
Trying to pull repository docker.io/library/centos ... 
latest: Pulling from docker.io/library/centos
Digest: sha256:2ae0d2c881c7123870114fb9cc7afabd1e31f9888dac8286884f6cf59373ed9b
Status: Image is up to <span class="nb">date </span><span class="k">for </span>docker.io/centos:latest

<span class="c"># æŸ¥çœ‹åˆšæ‰ä¸‹è½½çš„é•œåƒ</span>
<span class="o">[</span>root@linux-node1 ~]# docker images
REPOSITORY                  TAG                 IMAGE ID            CREATED                  SIZE
docker.io/nginx             latest              4a88d06e26f4        Less than a second ago   183.5 MB
docker.io/centos            latest              980e0e4c79ec        5 days ago               196.7 MB


<span class="c"># ä½¿ç”¨ docker save å°† centos é•œåƒä¿å­˜æˆä¸€ä¸ª tar æ–‡ä»¶</span>

<span class="o">[</span>root@linux-node1 ~]# docker images
REPOSITORY                  TAG                 IMAGE ID            CREATED             SIZE
docker.io/centos            latest              980e0e4c79ec        5 days ago          196.7 MB
<span class="o">[</span>root@linux-node1 ~]# docker save <span class="nt">-o</span> centos.tar centos
<span class="o">[</span>root@linux-node1 ~]# ll centos.tar 
<span class="nt">-rw-r--r--</span> 1 root root 204316160 Sep 12 19:43 centos.tar


<span class="c"># ä½¿ç”¨ docker rmi åˆ é™¤ centos é•œåƒ</span>

<span class="o">[</span>root@linux-node1 ~]# docker images
REPOSITORY                  TAG                 IMAGE ID            CREATED             SIZE
docker.io/centos            latest              980e0e4c79ec        5 days ago          196.7 MB
<span class="o">[</span>root@linux-node1 ~]# docker rmi 980e0e4c79ec
Untagged: docker.io/centos:latest
Deleted: sha256:980e0e4c79ec933406e467a296ce3b86685e6b42eed2f873745e6a91d718e37a
Deleted: sha256:0aeb287b1ba9fd4c951bb9f4bd8e50908f51c630e07b655b3b2f9581dc0fef0d

<span class="c"># ä½¿ç”¨ docker load å°†ä¹‹å‰å¯¼å‡ºçš„é•œåƒæ–‡ä»¶ centos.tar å†å¯¼å…¥</span>

<span class="o">[</span>root@linux-node1 ~]# docker load <span class="nt">--input</span> centos.tar 
<span class="o">[</span>root@linux-node1 ~]# docker images
REPOSITORY                  TAG                 IMAGE ID            CREATED                  SIZE
docker.io/nginx             latest              4a88d06e26f4        Less than a second ago   183.5 MB
docker.io/centos            latest              980e0e4c79ec        5 days ago               196.7 MB

</code></pre></div></div>

<h1 id="docker-å®¹å™¨ç®¡ç†">Docker å®¹å™¨ç®¡ç†</h1>

<ul>
  <li>è¿è¡Œå®¹å™¨ï¼šdocker run</li>
  <li>åœæ­¢å®¹å™¨ï¼šdocker stop</li>
  <li>æŸ¥çœ‹å®¹å™¨ï¼šdocker ps</li>
  <li>è¿›å…¥å®¹å™¨ï¼šdocker attach / nsenter / docker exec</li>
  <li>åˆ é™¤å®¹å™¨ï¼šdocker rm</li>
</ul>

<h2 id="è¿è¡Œåœæ­¢æŸ¥çœ‹å®¹å™¨">è¿è¡Œã€åœæ­¢ã€æŸ¥çœ‹å®¹å™¨</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c"># è¿è¡Œä¸€ä¸ª centos çª—å£è¾“å‡º â€œHello worldâ€</span>

<span class="o">[</span>root@linux-node1 ~]# docker run centos /bin/echo <span class="s2">"Hello world"</span>
Hello world

<span class="c"># ä½¿ç”¨ docker ps -l æŸ¥çœ‹æœ€æ–°åˆ›å»ºçš„ä¸€ä¸ªå®¹å™¨</span>
<span class="o">[</span>root@linux-node1 ~]# docker ps <span class="nt">-l</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                     PORTS               NAMES
9356550c0514        centos              <span class="s2">"/bin/echo 'Hello wor"</span>   5 minutes ago       Exited <span class="o">(</span>0<span class="o">)</span> 5 minutes ago                       stupefied_carson
<span class="c"># ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼Œå®¹å™¨çŠ¶æ€ä¸ºé€€å‡ºçŠ¶æ€ï¼Œè¯´æ˜ä¸Šé¢çš„å®¹å™¨è¿è¡Œå®Œæˆåå°±é€€å‡ºäº†</span>

<span class="c"># ä¸‹é¢è¿è¡Œå®¹å™¨æ—¶æŒ‡å®šåç§°ï¼Œå¹¶ä½¿ç”¨ -t -i å¼€å¯ä¼ªç»ˆç«¯å’Œäº¤äº’å¼ Shellï¼Œè¿™æ ·å¯ä»¥è¿›å…¥å®¹å™¨</span>

<span class="o">[</span>root@linux-node1 ~]# docker run <span class="nt">--name</span> mydocker <span class="nt">-t</span> <span class="nt">-i</span> centos /bin/bash
<span class="o">[</span>root@68c901ac8f8a /]# <span class="nb">ls</span> /
anaconda-post.log  bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
<span class="o">[</span>root@68c901ac8f8a /]# <span class="nb">uname</span> <span class="nt">-a</span>
Linux 68c901ac8f8a 3.10.0-327.18.2.el7.x86_64 <span class="c">#1 SMP Thu May 12 11:03:55 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux</span>
<span class="o">[</span>root@68c901ac8f8a /]# ps aux
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.3  0.0  11752  1872 ?        Ss   08:55   0:00 /bin/bash
root        16  0.0  0.0  47424  1660 ?        R+   08:55   0:00 ps aux
<span class="o">[</span>root@68c901ac8f8a /]# <span class="nb">exit
exit</span>

<span class="c"># ä¸Šé¢æ‰§è¡Œexit å°±é€€å‡ºäº†å®¹å™¨ï¼ŒåŒæ—¶è¿™ä¸ªå®¹å™¨ä¹Ÿé€€å‡ºäº†</span>

<span class="o">[</span>root@linux-node1 ~]# docker ps <span class="nt">-l</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES
68c901ac8f8a        centos              <span class="s2">"/bin/bash"</span>         2 minutes ago       Exited <span class="o">(</span>0<span class="o">)</span> 8 seconds ago                       mydocker

<span class="c"># æ‰§è¡Œ start å¯åŠ¨ä¸Šé¢é€€å‡ºçš„å®¹å™¨</span>

<span class="o">[</span>root@linux-node1 ~]# docker start mydocker
mydocker

<span class="c"># ä½¿ç”¨ docker ps æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨</span>

<span class="o">[</span>root@linux-node1 ~]# docker ps 
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
68c901ac8f8a        centos              <span class="s2">"/bin/bash"</span>         7 minutes ago       Up 13 seconds                           mydocker

</code></pre></div></div>

<h2 id="è¿›å…¥å®¹å™¨">è¿›å…¥å®¹å™¨</h2>

<p>è¿›å…¥å®¹å™¨æœ‰ä¸‰ç§æ–¹å¼ï¼š</p>

<ul>
  <li>ä½¿ç”¨ docker attatch</li>
  <li>ä½¿ç”¨ nsenter</li>
  <li>ä½¿ç”¨ docker exec</li>
</ul>

<h3 id="1-ä½¿ç”¨-docker-attach-è¿›å…¥å®¹å™¨">1. ä½¿ç”¨ docker attach è¿›å…¥å®¹å™¨</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="o">[</span>root@linux-node1 ~]# docker attach mydocker
<span class="o">[</span>root@68c901ac8f8a /]# ps aux 
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.0  11776  1864 ?        Ss   09:02   0:00 /bin/bash
root        14  0.0  0.0  47424  1660 ?        R+   09:07   0:00 ps aux

<span class="c"># æ­¤ç§æ–¹å¼æœ‰ä¸ªä¸è¶³ï¼šå½“å¤šä¸ªç»ˆç«¯éƒ½è¿›å…¥å®¹å™¨åï¼Œæ‰§è¡Œçš„æ“ä½œä¼šåŒæ­¥æ˜¾ç¤ºï¼Œå½“æŸä¸ªçª—å£å› å‘½ä»¤é˜»å¡æ—¶,å…¶ä»–çª—å£ä¹Ÿæ— æ³•æ‰§è¡Œæ“ä½œäº†ã€‚</span>
<span class="c"># docker attach è¿›å…¥å®¹å™¨åï¼Œæ‰§è¡Œ exit å®¹å™¨ä¹Ÿä¼š exit</span>

</code></pre></div></div>

<h3 id="2-ä½¿ç”¨-nsenter-è¿›å…¥å®¹å™¨">2. ä½¿ç”¨ nsenter è¿›å…¥å®¹å™¨</h3>

<p>nsenter å·¥å…·åœ¨ util-linux åŒ… 2.23 ç‰ˆæœ¬ååŒ…å«ã€‚<br />
nsenter å¯ä»¥è®¿é—®å¦ä¸€ä¸ªè¿›ç¨‹çš„å‘½åç©ºé—´ã€‚nsenter è¦æ­£å¸¸å·¥ä½œéœ€è¦æœ‰ root æƒé™ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c"># ä¸ºäº†è¿æ¥åˆ°å®¹å™¨ï¼Œä½ è¿˜éœ€è¦æ‰¾åˆ°å®¹å™¨çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹çš„ PIDï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤è·å–</span>

<span class="o">[</span>root@linux-node1 ~]# docker inspect <span class="nt">-f</span> <span class="s2">""</span> mydocker
42667

<span class="c"># é€šè¿‡è¿™ä¸ª PIDï¼Œå°±å¯ä»¥è¿æ¥åˆ°è¿™ä¸ªå®¹å™¨</span>

<span class="o">[</span>root@linux-node1 ~]# nsenter <span class="nt">-t</span> 42667 <span class="nt">-m</span> <span class="nt">-u</span> <span class="nt">-i</span> <span class="nt">-n</span> <span class="nt">-p</span>
<span class="o">[</span>root@68c901ac8f8a /]# ps aux
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.0  11776  1668 ?        Ss+  09:16   0:00 /bin/bash
root        14  0.2  0.1  13376  1984 ?        S    09:18   0:00 <span class="nt">-bash</span>
root        27  0.0  0.0  49024  1808 ?        R+   09:18   0:00 ps aux

<span class="c"># æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ 2 ä¸ª bashï¼Œç¬¬äºŒä¸ª bash æ˜¯ nsenter è¿›å…¥æ—¶æ‰§è¡Œçš„ï¼Œå½“ exit åï¼Œå®¹å™¨å¹¶ä¸ä¼šé€€å‡º</span>

<span class="o">[</span>root@68c901ac8f8a /]# <span class="nb">exit
logout</span>
<span class="o">[</span>root@linux-node1 ~]# docker ps 
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
68c901ac8f8a        centos              <span class="s2">"/bin/bash"</span>         24 minutes ago      Up 4 minutes                            mydocker
</code></pre></div></div>

<p>æˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢å‘½ä»¤å†™æˆä¸€ä¸ªç®€å•çš„è¿›å…¥ Docker å®¹å™¨çš„è„šæœ¬ï¼Œå¦‚ä¸‹ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
root@linux-node1 ~]# vim docker_in.sh
<span class="o">[</span>root@linux-node1 ~]# <span class="nb">cat </span>docker_in.sh
<span class="c">#!/bin/bash</span>
<span class="c"># Use nsenter to enter docker</span>

docker_in<span class="o">(){</span>
   <span class="nv">NAME_ID</span><span class="o">=</span><span class="nv">$1</span>
   <span class="nv">PID</span><span class="o">=</span><span class="si">$(</span>docker inspect <span class="nt">-f</span> <span class="s2">""</span> <span class="nv">$NAME_ID</span><span class="si">)</span> 
   nsenter <span class="nt">-t</span> <span class="nv">$PID</span> <span class="nt">-m</span> <span class="nt">-u</span> <span class="nt">-i</span> <span class="nt">-n</span> <span class="nt">-p</span>
<span class="o">}</span>

docker_in <span class="nv">$1</span>

<span class="o">[</span>root@linux-node1 ~]# <span class="nb">chmod</span> +x docker_in.sh 
<span class="o">[</span>root@linux-node1 ~]# ./docker_in.sh mydocker
<span class="o">[</span>root@68c901ac8f8a /]# w
 09:23:03 up 10:22,  0 <span class="nb">users</span>,  load average: 0.00, 0.01, 0.05
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
<span class="o">[</span>root@68c901ac8f8a /]# <span class="nb">exit
logout</span>

</code></pre></div></div>

<h3 id="3-ä½¿ç”¨-docker-exec-è¿›å…¥å®¹å™¨">3. ä½¿ç”¨ docker exec è¿›å…¥å®¹å™¨</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c"># docker exec æ˜¯åœ¨ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ä¸­è¿è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œä½†æ˜¯ä¸è¿›åˆ°å®¹å™¨é‡Œé¢ï¼Œç›´æ¥åœ¨å®¹å™¨å¤–æ‰§è¡Œå®¹å™¨å†…çš„å‘½ä»¤ï¼Œå¦‚ä¸‹ï¼š</span>

<span class="o">[</span>root@linux-node1 ~]# docker <span class="nb">exec </span>mydocker w
 09:35:08 up 10:34,  0 <span class="nb">users</span>,  load average: 0.00, 0.01, 0.05
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT

<span class="c"># ä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŠ€å·§ï¼Œæ‰§è¡Œ /bin/bash è¾¾åˆ°è¿›å…¥å®¹å™¨çš„ç›®çš„</span>

<span class="o">[</span>root@linux-node1 ~]# docker <span class="nb">exec</span> <span class="nt">-it</span> mydocker /bin/bash
<span class="o">[</span>root@68c901ac8f8a /]# ps aux
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.0  11776  1668 ?        Ss+  09:16   0:00 /bin/bash
root        50  1.2  0.1  11776  1880 ?        Ss   09:36   0:00 /bin/bash
root        62  0.0  0.0  47424  1660 ?        R+   09:36   0:00 ps aux

<span class="c"># æ³¨æ„ï¼šdocker exec æ–¹å¼å¯èƒ½ä¼šå‡ºç°ä¸€äº›æœªçŸ¥é—®é¢˜</span>

</code></pre></div></div>

<p>å¯¹æ¯”ä¸Šé¢ 3 ç§è¿›å…¥å®¹å™¨çš„æ–¹å¼ï¼Œå»ºè®®ä½¿ç”¨ nsenter çš„æ–¹å¼è¿›å…¥å®¹å™¨ã€‚</p>

<h2 id="åˆ é™¤å®¹å™¨">åˆ é™¤å®¹å™¨</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c"># ä½¿ç”¨ docker rm åˆ é™¤å®¹å™¨</span>

<span class="o">[</span>root@linux-node1 ~]# docker <span class="nb">rm </span>mydocker
Failed to remove container <span class="o">(</span>mydocker<span class="o">)</span>: Error response from daemon: Conflict, You cannot remove a running container. Stop the container before attempting removal or use <span class="nt">-f</span>
<span class="c"># æç¤ºæ­£åœ¨è¿è¡Œä¸­çš„å®¹å™¨ä¸èƒ½åˆ é™¤ï¼Œå¯ä»¥ä½¿ç”¨ -f å‚æ•°å¼ºåˆ¶åˆ é™¤ï¼Œä¹Ÿå¯ä»¥ docker stop åœæ­¢å®¹å™¨åå†åˆ é™¤</span>

<span class="c"># ä½¿ç”¨--rmï¼Œå½“å®¹å™¨è¿è¡Œå®Œåå°±è¢«åˆ é™¤ï¼Œå¸¸ç”¨äºæµ‹è¯•ç›®çš„</span>

<span class="o">[</span>root@linux-node1 ~]# docker run <span class="nt">--rm</span> centos /bin/echo <span class="s2">"test"</span>
<span class="nb">test</span>

</code></pre></div></div>

<h2 id="å®ˆæŠ¤æ€è¿è¡Œå®¹å™¨">å®ˆæŠ¤æ€è¿è¡Œå®¹å™¨</h2>

<p>æ›´å¤šçš„æ—¶å€™ï¼Œéœ€è¦è®© Docker åœ¨åå°è¿è¡Œè€Œä¸æ˜¯ç›´æ¥æŠŠæ‰§è¡Œå‘½ä»¤çš„ç»“æœè¾“å‡ºåœ¨å½“å‰å®¿ä¸»æœºä¸‹ã€‚æ­¤æ—¶ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ  -d å‚æ•°æ¥å®ç°ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c"># å¦‚æœä¸ä½¿ç”¨ -d å‚æ•°è¿è¡Œå®¹å™¨</span>

<span class="o">[</span>root@linux-node1 ~]# docker run centos /bin/bash <span class="nt">-c</span> <span class="s2">"while true; do echo hello world; sleep 1; done"</span>
hello world
hello world
hello world
hello world
hello world
<span class="c"># å®¹å™¨ä¼šæŠŠè¾“å‡ºçš„ç»“æœ(STDOUT)æ‰“å°åˆ°å®¿ä¸»æœºä¸Šé¢</span>

<span class="c"># å¦‚æœä½¿ç”¨äº† -d å‚æ•°è¿è¡Œå®¹å™¨</span>

<span class="o">[</span>root@linux-node1 ~]# docker run <span class="nt">-d</span> centos /bin/bash <span class="nt">-c</span> <span class="s2">"while true; do echo hello world; sleep 1; done"</span>
c303ceb3639b21564b82f09f006fff5eed1f842a7baa273b2314b9543c7e7c30

<span class="c"># æ­¤æ—¶å®¹å™¨ä¼šåœ¨åå°è¿è¡Œå¹¶ä¸ä¼šæŠŠè¾“å‡ºçš„ç»“æœ(STDOUT)æ‰“å°åˆ°å®¿ä¸»æœºä¸Šé¢(è¾“å‡ºç»“æœå¯ä»¥ç”¨ docker logs æŸ¥çœ‹)ã€‚</span>

<span class="o">[</span>root@linux-node1 ~]# docker logs c303ceb3639b
hello world
hello world
hello world
hello world
hello world
hello world
hello world
...

æ³¨ï¼š å®¹å™¨æ˜¯å¦ä¼šé•¿ä¹…è¿è¡Œï¼Œæ˜¯å’Œ docker run æŒ‡å®šçš„å‘½ä»¤æœ‰å…³ï¼Œå’Œ <span class="nt">-d</span> å‚æ•°æ— å…³ã€‚

</code></pre></div></div>

<h1 id="ref">Ref</h1>
<p><a href="https://docs.docker.com/engine/installation/linux/centos/"> Installation on CentOS </a><br />
<a href="https://yeasy.gitbooks.io/docker_practice/content/container/enter.html">è¿›å…¥å®¹å™¨</a><br />
<a href="https://yeasy.gitbooks.io/docker_practice/content/container/daemon.html">åå°(background)è¿è¡Œ</a></p>
:ET